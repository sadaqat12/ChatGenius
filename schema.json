{"Current Schema, Policies and Foreign Keys:":[
  {"Policies" :
  [
    {
      "tablename": "channel_members",
      "policyname": "Channel members can view channel",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "channel_members",
      "policyname": "Enable read access for team members",
      "cmd": "SELECT",
      "roles": "{public}"
    },
    {
      "tablename": "channel_members",
      "policyname": "Service role can manage channel members",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "channel_members",
      "policyname": "Users can join channels",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "channel_members",
      "policyname": "Users can leave channels",
      "cmd": "DELETE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "channel_members",
      "policyname": "authenticated_channel_members_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "channel_members",
      "policyname": "authenticated_channel_members_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "channel_members",
      "policyname": "service_role_channel_members",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "channels",
      "policyname": "Enable read access for team members",
      "cmd": "SELECT",
      "roles": "{public}"
    },
    {
      "tablename": "channels",
      "policyname": "Service role can manage channels",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "channels",
      "policyname": "Users can view channels in their teams",
      "cmd": "SELECT",
      "roles": "{public}"
    },
    {
      "tablename": "channels",
      "policyname": "authenticated_channels_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "channels",
      "policyname": "authenticated_channels_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "channels",
      "policyname": "service_role_channels",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "chat_messages",
      "policyname": "Users can insert their own chat messages",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "chat_messages",
      "policyname": "Users can read their own chat messages",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "chat_threads",
      "policyname": "Users can insert their own chat threads",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "chat_threads",
      "policyname": "Users can read their own chat threads",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_channels",
      "policyname": "authenticated_dm_channels_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_channels",
      "policyname": "authenticated_dm_channels_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_channels",
      "policyname": "service_role_dm_channels",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "direct_message_participants",
      "policyname": "Users can leave DM channels",
      "cmd": "DELETE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_participants",
      "policyname": "Users can view their DM participants",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_participants",
      "policyname": "authenticated_dm_participants_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_participants",
      "policyname": "authenticated_dm_participants_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_participants",
      "policyname": "service_role_dm_participants",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "direct_message_reactions",
      "policyname": "authenticated_dm_reactions_delete",
      "cmd": "DELETE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_reactions",
      "policyname": "authenticated_dm_reactions_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_reactions",
      "policyname": "authenticated_dm_reactions_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_message_reactions",
      "policyname": "service_role_dm_reactions",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "Service role can do everything",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "Users can send messages to their DM channels",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "Users can view messages in their DM channels",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "authenticated_dm_messages_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "authenticated_dm_messages_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "direct_messages_delete",
      "cmd": "DELETE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "direct_messages_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "direct_messages_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "direct_messages_update",
      "cmd": "UPDATE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "direct_messages",
      "policyname": "service_role_dm_messages",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "messages",
      "policyname": "Enable read access for channel members",
      "cmd": "SELECT",
      "roles": "{public}"
    },
    {
      "tablename": "messages",
      "policyname": "Users can view messages in their channels",
      "cmd": "SELECT",
      "roles": "{public}"
    },
    {
      "tablename": "messages",
      "policyname": "authenticated_messages_delete",
      "cmd": "DELETE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "messages",
      "policyname": "authenticated_messages_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "messages",
      "policyname": "authenticated_messages_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "messages",
      "policyname": "authenticated_messages_update",
      "cmd": "UPDATE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "messages",
      "policyname": "service_role_messages",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "reactions",
      "policyname": "Enable read access for message viewers",
      "cmd": "SELECT",
      "roles": "{public}"
    },
    {
      "tablename": "reactions",
      "policyname": "authenticated_reactions_delete",
      "cmd": "DELETE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "reactions",
      "policyname": "authenticated_reactions_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "reactions",
      "policyname": "authenticated_reactions_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_invites",
      "policyname": "create_team_invites",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_invites",
      "policyname": "delete_team_invites",
      "cmd": "DELETE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_invites",
      "policyname": "update_team_invites",
      "cmd": "UPDATE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_invites",
      "policyname": "view_team_invites",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_members",
      "policyname": "Enable read access for team members",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_members",
      "policyname": "Team members can view team",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_members",
      "policyname": "Users can join teams",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_members",
      "policyname": "Users can leave teams",
      "cmd": "DELETE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_members",
      "policyname": "authenticated_delete",
      "cmd": "DELETE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_members",
      "policyname": "authenticated_insert",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_members",
      "policyname": "authenticated_read",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_members",
      "policyname": "authenticated_update",
      "cmd": "UPDATE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "team_members",
      "policyname": "service_role_all",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "teams",
      "policyname": "Service role can manage teams",
      "cmd": "ALL",
      "roles": "{service_role}"
    },
    {
      "tablename": "teams",
      "policyname": "teams_insert",
      "cmd": "INSERT",
      "roles": "{public}"
    },
    {
      "tablename": "teams",
      "policyname": "teams_select",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "teams",
      "policyname": "teams_update",
      "cmd": "UPDATE",
      "roles": "{public}"
    },
    {
      "tablename": "user_profiles",
      "policyname": "Allow profile management",
      "cmd": "ALL",
      "roles": "{public}"
    },
    {
      "tablename": "user_profiles",
      "policyname": "Enable read access for authenticated users",
      "cmd": "SELECT",
      "roles": "{public}"
    },
    {
      "tablename": "user_profiles",
      "policyname": "Enable read access for user profiles",
      "cmd": "SELECT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "user_profiles",
      "policyname": "Users can insert own profile",
      "cmd": "INSERT",
      "roles": "{authenticated}"
    },
    {
      "tablename": "user_profiles",
      "policyname": "Users can update own profile",
      "cmd": "UPDATE",
      "roles": "{authenticated}"
    },
    {
      "tablename": "user_profiles",
      "policyname": "Users can update their own profile",
      "cmd": "UPDATE",
      "roles": "{public}"
    },
    {
      "tablename": "user_profiles",
      "policyname": "Users can update their own status",
      "cmd": "UPDATE",
      "roles": "{public}"
    },
    {
      "tablename": "user_profiles",
      "policyname": "Users can view all profiles",
      "cmd": "SELECT",
      "roles": "{anon,authenticated}"
    }
  ]},

{
  "Foreign Keys": [
    {
      "table_name": "team_invites",
      "column_name": "team_id",
      "foreign_table_name": "teams",
      "foreign_column_name": "id"
    },
    {
      "table_name": "team_members",
      "column_name": "team_id",
      "foreign_table_name": "teams",
      "foreign_column_name": "id"
    },
    {
      "table_name": "channels",
      "column_name": "team_id",
      "foreign_table_name": "teams",
      "foreign_column_name": "id"
    },
    {
      "table_name": "messages",
      "column_name": "channel_id",
      "foreign_table_name": "channels",
      "foreign_column_name": "id"
    },
    {
      "table_name": "messages",
      "column_name": "parent_id",
      "foreign_table_name": "messages",
      "foreign_column_name": "id"
    },
    {
      "table_name": "channel_members",
      "column_name": "channel_id",
      "foreign_table_name": "channels",
      "foreign_column_name": "id"
    },
    {
      "table_name": "reactions",
      "column_name": "message_id",
      "foreign_table_name": "messages",
      "foreign_column_name": "id"
    },
    {
      "table_name": "chat_messages",
      "column_name": "thread_id",
      "foreign_table_name": "chat_threads",
      "foreign_column_name": "id"
    },
    {
      "table_name": "direct_message_participants",
      "column_name": "channel_id",
      "foreign_table_name": "direct_message_channels",
      "foreign_column_name": "id"
    },
    {
      "table_name": "direct_messages",
      "column_name": "channel_id",
      "foreign_table_name": "direct_message_channels",
      "foreign_column_name": "id"
    },
    {
      "table_name": "direct_message_reactions",
      "column_name": "message_id",
      "foreign_table_name": "direct_messages",
      "foreign_column_name": "id"
    }
  ]},

{"Tables":
[
  {
    "table_name": "channel_members",
    "columns": "channel_id uuid NOT NULL\nuser_id uuid NOT NULL\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())"
  },
  {
    "table_name": "channels",
    "columns": "is_private boolean DEFAULT false\nteam_id uuid NOT NULL\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\ndescription text\nname text NOT NULL\nid uuid NOT NULL DEFAULT uuid_generate_v4()\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\ncreated_by uuid NOT NULL"
  },
  {
    "table_name": "chat_messages",
    "columns": "metadata jsonb\ncontent text NOT NULL\nrole text NOT NULL\nuser_id uuid NOT NULL\nthread_id bigint NOT NULL\nid bigint NOT NULL DEFAULT nextval('chat_messages_id_seq'::regclass)\ncreated_at timestamp with time zone NOT NULL DEFAULT now()"
  },
  {
    "table_name": "chat_threads",
    "columns": "user_id uuid NOT NULL\nid bigint NOT NULL DEFAULT nextval('chat_threads_id_seq'::regclass)\ntitle text\ncreated_at timestamp with time zone NOT NULL DEFAULT now()\nupdated_at timestamp with time zone NOT NULL DEFAULT now()\nassistant_type text NOT NULL"
  },
  {
    "table_name": "direct_message_channels",
    "columns": "created_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nid uuid NOT NULL DEFAULT uuid_generate_v4()"
  },
  {
    "table_name": "direct_message_participants",
    "columns": "channel_id uuid NOT NULL\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nuser_id uuid NOT NULL"
  },
  {
    "table_name": "direct_message_reactions",
    "columns": "user_id uuid\ncreated_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now())\nmessage_id uuid\nid uuid NOT NULL DEFAULT gen_random_uuid()\nemoji text NOT NULL"
  },
  {
    "table_name": "direct_messages",
    "columns": "sender_id uuid\ncontent text NOT NULL\nid uuid NOT NULL DEFAULT uuid_generate_v4()\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nfile jsonb\nchannel_id uuid"
  },
  {
    "table_name": "messages",
    "columns": "file jsonb\ntopic text NOT NULL\nextension text NOT NULL\npayload jsonb\nevent text\nprivate boolean DEFAULT false\nupdated_at timestamp without time zone NOT NULL DEFAULT now()\ninserted_at timestamp without time zone NOT NULL DEFAULT now()\nid uuid NOT NULL DEFAULT gen_random_uuid()\nid uuid NOT NULL DEFAULT uuid_generate_v4()\ncontent text NOT NULL\nchannel_id uuid NOT NULL\nuser_id uuid NOT NULL\nparent_id uuid\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())"
  },
  {
    "table_name": "reactions",
    "columns": "user_id uuid NOT NULL\nmessage_type text NOT NULL\ncreated_by uuid NOT NULL\nid uuid NOT NULL DEFAULT gen_random_uuid()\nmessage_id uuid NOT NULL\ncreated_at timestamp with time zone DEFAULT now()\nemoji text NOT NULL"
  },
  {
    "table_name": "team_invites",
    "columns": "team_id uuid NOT NULL\nid uuid NOT NULL DEFAULT gen_random_uuid()\nupdated_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now())\ncreated_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now())\nstatus text NOT NULL\nemail text NOT NULL"
  },
  {
    "table_name": "team_members",
    "columns": "user_id uuid NOT NULL\nteam_id uuid NOT NULL\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nrole text NOT NULL DEFAULT 'member'::text"
  },
  {
    "table_name": "teams",
    "columns": "created_by uuid NOT NULL\ndescription text\nname text NOT NULL\nid uuid NOT NULL DEFAULT uuid_generate_v4()\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())"
  },
  {
    "table_name": "tweets",
    "columns": "id bigint NOT NULL DEFAULT nextval('tweets_id_seq'::regclass)\nembedding USER-DEFINED NOT NULL\ncontent text NOT NULL"
  },
  {
    "table_name": "user_profiles",
    "columns": "status text NOT NULL DEFAULT 'online'::text\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\navatar_url text\nname text NOT NULL\nuser_id uuid NOT NULL\nid uuid NOT NULL DEFAULT uuid_generate_v4()\nstatus_updated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\npending_team_name text"
  }
]}
]}