{"tables": [
  {
    "table_name": "channel_members",
    "columns": "channel_id uuid NOT NULL\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nuser_id uuid NOT NULL"
  },
  {
    "table_name": "channels",
    "columns": "id uuid NOT NULL DEFAULT uuid_generate_v4()\nname text NOT NULL\ndescription text\nteam_id uuid NOT NULL\nis_private boolean DEFAULT false\ncreated_by uuid NOT NULL\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())"
  },
  {
    "table_name": "direct_message_channels",
    "columns": "id uuid NOT NULL DEFAULT uuid_generate_v4()\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())"
  },
  {
    "table_name": "direct_message_participants",
    "columns": "channel_id uuid NOT NULL\nuser_id uuid NOT NULL\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())"
  },
  {
    "table_name": "direct_message_reactions",
    "columns": "created_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nemoji text NOT NULL\nuser_id uuid\nmessage_id uuid\nid uuid NOT NULL DEFAULT uuid_generate_v4()"
  },
  {
    "table_name": "direct_messages",
    "columns": "file jsonb\nsender_id uuid\nchannel_id uuid\ncontent text NOT NULL\nid uuid NOT NULL DEFAULT uuid_generate_v4()\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())"
  },
  {
    "table_name": "message_reactions",
    "columns": "user_id uuid NOT NULL\nmessage_id uuid NOT NULL\nid uuid NOT NULL DEFAULT uuid_generate_v4()\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nemoji text NOT NULL"
  },
  {
    "table_name": "messages",
    "columns": "parent_id uuid\ntopic text NOT NULL\nextension text NOT NULL\npayload jsonb\nevent text\nprivate boolean DEFAULT false\nupdated_at timestamp without time zone NOT NULL DEFAULT now()\ninserted_at timestamp without time zone NOT NULL DEFAULT now()\nid uuid NOT NULL DEFAULT gen_random_uuid()\nid uuid NOT NULL DEFAULT uuid_generate_v4()\ncontent text NOT NULL\nchannel_id uuid NOT NULL\nuser_id uuid NOT NULL\nfile jsonb\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())"
  },
  {
    "table_name": "reactions",
    "columns": "id uuid NOT NULL DEFAULT gen_random_uuid()\nmessage_id uuid NOT NULL\nuser_id uuid NOT NULL\ncreated_by uuid NOT NULL\ncreated_at timestamp with time zone DEFAULT now()\nemoji text NOT NULL"
  },
  {
    "table_name": "team_invites",
    "columns": "status text NOT NULL\nemail text NOT NULL\nteam_id uuid\nupdated_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now())\ncreated_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now())\nid uuid NOT NULL DEFAULT gen_random_uuid()"
  },
  {
    "table_name": "team_members",
    "columns": "created_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nuser_id uuid NOT NULL\nteam_id uuid NOT NULL\nrole text NOT NULL DEFAULT 'member'::text"
  },
  {
    "table_name": "teams",
    "columns": "created_by uuid NOT NULL\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\ndescription text\nname text NOT NULL\nid uuid NOT NULL DEFAULT uuid_generate_v4()"
  },
  {
    "table_name": "user_profiles",
    "columns": "user_id uuid NOT NULL\nname text NOT NULL\nid uuid NOT NULL DEFAULT uuid_generate_v4()\navatar_url text\ncreated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\nupdated_at timestamp with time zone DEFAULT timezone('utc'::text, now())\npending_team_name text"
  }
],
"foreign_keys": [
  {
    "table_name": "team_invites",
    "column_name": "team_id",
    "foreign_table_name": "teams",
    "foreign_column_name": "id"
  },
  {
    "table_name": "message_reactions",
    "column_name": "message_id",
    "foreign_table_name": "messages",
    "foreign_column_name": "id"
  },
  {
    "table_name": "team_members",
    "column_name": "team_id",
    "foreign_table_name": "teams",
    "foreign_column_name": "id"
  },
  {
    "table_name": "channels",
    "column_name": "team_id",
    "foreign_table_name": "teams",
    "foreign_column_name": "id"
  },
  {
    "table_name": "messages",
    "column_name": "channel_id",
    "foreign_table_name": "channels",
    "foreign_column_name": "id"
  },
  {
    "table_name": "messages",
    "column_name": "parent_id",
    "foreign_table_name": "messages",
    "foreign_column_name": "id"
  },
  {
    "table_name": "channel_members",
    "column_name": "channel_id",
    "foreign_table_name": "channels",
    "foreign_column_name": "id"
  },
  {
    "table_name": "reactions",
    "column_name": "message_id",
    "foreign_table_name": "messages",
    "foreign_column_name": "id"
  },
  {
    "table_name": "direct_message_participants",
    "column_name": "channel_id",
    "foreign_table_name": "direct_message_channels",
    "foreign_column_name": "id"
  },
  {
    "table_name": "direct_messages",
    "column_name": "channel_id",
    "foreign_table_name": "direct_message_channels",
    "foreign_column_name": "id"
  },
  {
    "table_name": "direct_message_reactions",
    "column_name": "message_id",
    "foreign_table_name": "direct_messages",
    "foreign_column_name": "id"
  }
],
"policies": [
  {
    "tablename": "team_invites",
    "policyname": "Team admins can create invites",
    "cmd": "INSERT",
    "roles": "{authenticated}"
  },
  {
    "tablename": "team_invites",
    "policyname": "Team admins can delete invites",
    "cmd": "DELETE",
    "roles": "{authenticated}"
  },
  {
    "tablename": "team_invites",
    "policyname": "Team admins can update invites",
    "cmd": "UPDATE",
    "roles": "{authenticated}"
  },
  {
    "tablename": "team_invites",
    "policyname": "Team admins can view invites",
    "cmd": "SELECT",
    "roles": "{authenticated}"
  }
]} 